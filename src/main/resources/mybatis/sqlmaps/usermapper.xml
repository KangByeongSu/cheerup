<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserMapper">
	<select id="checkUser" parameterType="com.skplanet.project2.model.UserDTO"
		resultType="com.skplanet.project2.model.UserDTO">
		    SELECT
		count(*) as count,
		IFNULL(u_nickname, '') as
		uNickname
		FROM
		Elephant_User user
		WHERE
		u_id=#{uId} and u_pw=#{uPw}
	</select>

	<resultMap id="ImageGridMap" type="com.skplanet.project2.model.ImageGridDTO">
		<result property="contentId" column="c_id" />
		<result property="imgUrl" column="c_imgurl" />
	</resultMap>
	<select id="userImageGridURL" parameterType="String" resultMap="ImageGridMap">
		select c_id as contentId, c_imgurl as imgUrl
		from Elephant_Contents
		where
		Elephant_User_u_id=#{userId};
	</select>

	<select id="likeCount" parameterType="Integer" resultType="Integer">
		SELECT COUNT(*) FROM Elephant_Like where
		Elephant_Contents_c_id=#{contentId};
	</select>

	<select id="commentCount" parameterType="Integer" resultType="Integer">
		SELECT COUNT(*) FROM Elephant_Comment where
		Elephant_Contents_c_id=#{contentId};
	</select>


	<select id="extendModal" parameterType="Integer"
		resultType="com.skplanet.project2.model.PostFeedDTO">
		SELECT c_id as id, Elephant_User_u_id as userId,
		c_comment as comment, c_imgurl as imgUrl, c_time as time FROM
		Elephant_Contents WHERE c_id=#{contentId};
	</select>



	<update id="updateUser" parameterType="com.skplanet.project2.model.UserDTO">
	
		update 
		Elephant_User 
		
		set u_nickname=#{uNickname},u_pw=#{uPw}
		
		where
		u_id=#{uId}
	
	</update>
	
</mapper>